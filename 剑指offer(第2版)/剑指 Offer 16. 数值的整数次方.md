## 剑指 Offer 16. 数值的整数次方

### 快速幂(二进制法)

比如要求x^11^，正常的乘积需要循环乘11次，时间复杂度为O(n)

快速幂的思想就是将指数11可以转成二进制数1011，则原来的式子可以转化成

x^11^=$x^{2^3}$$*x^{2^1}*$$x^{2^0}$，此时只运算了3次乘积，时间复杂度降至`O(logn)`

下方代码中的`x *= x`是一个累乘的过程，得到四位二进制数，对应的四个权重，x，x∗=x，x^2^∗=x^2^，x^4^∗=x^4^

1011二进制数，从右至左分别为1 1 0 1 ，只有在1的位置上，才有相应的权重，这也就是为什么需要通过与运算：(b & 1) == 1判断最后一位是否为1。

x−−−>$x^{2^0}$ ---------> 1

x2−−−>$x^{2^1}$-------------> 1

x4−−−>$x^{2^2}$-----------------> 0

x8−−−>$x^{2^3}$-----------------------> 1

最终的结果就是将每一位的1 所对应的权重相乘即可：$x^{2^3}$$*x^{2^1}*$$x^{2^0}$

```javascript
/**
 * @param {number} x
 * @param {number} n
 * @return {number}
 */
var myPow = function(x, n) {
    if(x===0) return 0;
    if(n<0){
        x=1/x;
        n=-n;
    }
    let res=1;
    while(n){
        res*=n&1?x:1;
        x*=x;
        n>>>=1;
    }
    return res;
};
```

时间复杂度：`O(logn)`

空间复杂度：O(1)